# 로그인 시스템의 개념과 그 구현 방식

![](https://i.ibb.co/kH81WMc/PASSWORD.png)

### 1. **User 엔티티**: 사용자 정보를 담는 클래스

`User`는 애플리케이션에서 **사용자 정보를 저장하는 엔티티**입니다. 이 엔티티는 데이터베이스에 저장되는 사용자 정보를 객체로 표현한 것입니다.

- 예를 들어, 사용자 정보를 담고 있는 필드에는 **아이디(사용자명)**, **비밀번호** 등이 포함될 수 있습니다.
- 사용자 정보를 안전하게 다루기 위해 비밀번호는 보통 **해시 알고리즘**을 사용해 암호화된 형태로 저장됩니다.

**예시**:

```java
@Entity
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String username;
    private String password;

    // 기본 생성자, getter, setter 등 생략
}

```

---

### 2. **UserRepository**: 사용자 정보를 데이터베이스에서 관리하는 레포지토리

`UserRepository`는 **데이터베이스에 접근해 사용자 정보를 조회하거나 저장**하는 데 사용됩니다. 여기서는 **JPA**를 상속받아 이를 쉽게 구현할 수 있습니다. JPA를 상속받으면, 기본적인 데이터베이스 처리(저장, 조회, 수정, 삭제)를 위한 메서드들이 자동으로 제공됩니다.

- JPA를 상속받은 `UserRepository`에서는 예를 들어, 사용자 이름으로 사용자를 찾는 쿼리 메서드를 정의할 수 있습니다.

**예시**:

```java
public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findByUsername(String username); // 사용자 이름으로 조회
}

```

---

### 3. **로그인 과정**: 비밀번호 확인

로그인 과정은 일반적으로 다음과 같이 진행됩니다.

1. **사용자가 로그인 폼에 아이디(또는 사용자명)와 비밀번호를 입력**합니다.
2. **UserRepository**를 사용해 데이터베이스에서 해당 사용자명을 가진 사용자를 찾습니다.
    - 이때, `findByUsername()` 메서드를 사용하여 입력한 사용자명을 가진 사용자가 존재하는지 확인합니다.
3. **찾은 사용자 정보와 사용자가 입력한 비밀번호를 비교**합니다.
    - 비밀번호는 일반적으로 **암호화된 형태**로 저장되어 있기 때문에, 입력한 비밀번호도 동일한 방식으로 암호화한 후 저장된 비밀번호와 비교합니다.
4. 비밀번호가 일치하면 **로그인 성공**으로 처리하고, 그렇지 않으면 **로그인 실패**를 처리합니다.

---

### 4. **비밀번호 암호화**

이미지에서는 비밀번호 관련 화면이 보이는데, 이는 비밀번호가 사용자 로그인에서 중요한 역할을 한다는 점을 강조합니다. 비밀번호는 일반적으로 **해시 함수**(예: BCrypt)를 사용하여 암호화한 뒤 저장합니다.

- **비밀번호 암호화 과정**:
    1. 사용자가 비밀번호를 입력하면, **해시 알고리즘**을 통해 암호화됩니다.
    2. 암호화된 비밀번호는 데이터베이스에 저장됩니다.
    3. 사용자가 로그인할 때 입력한 비밀번호 역시 같은 방식으로 암호화한 뒤, **저장된 암호화된 비밀번호와 비교**하여 일치 여부를 확인합니다.

**비밀번호 암호화 예시**:

```java
public class PasswordUtil {
    public static String hashPassword(String password) {
        return BCrypt.hashpw(password, BCrypt.gensalt()); // 비밀번호 암호화
    }

    public static boolean checkPassword(String password, String hashedPassword) {
        return BCrypt.checkpw(password, hashedPassword); // 비밀번호 비교
    }
}

```

---

### 5. **전체적인 로그인 흐름**

1. 사용자가 로그인 폼에서 아이디와 비밀번호를 입력합니다.
2. 서버에서는 `UserRepository`를 통해 해당 아이디(또는 사용자명)를 가진 사용자가 있는지 찾습니다.
3. 사용자가 입력한 비밀번호를 암호화한 뒤, 데이터베이스에 저장된 암호화된 비밀번호와 비교합니다.
4. 비밀번호가 일치하면 로그인에 성공하고, 그렇지 않으면 실패 메시지를 반환합니다.

이 과정에서 **비밀번호 암호화**를 통해 사용자의 **개인 정보 보호**를 강화하고, 데이터베이스에서 사용자 정보를 안전하게 관리할 수 있습니다.

---

### 결론

`User` 엔티티와 `UserRepository`는 사용자 정보 관리를 위한 중요한 요소입니다. 로그인 시스템에서는 **비밀번호 암호화**를 통해 보안을 유지하고, 사용자 정보를 안전하게 조회하고 검증하는 과정을 거칩니다.